(* One of the bits will be written to channel c. Nondeterminism not implemented so 1 will be written to c. *)
(* let GetBit : Int -> (Int @ W) *)
(* let Read : Chan -> (Int @ R) = lam c. rd c *)

let GetBit = lam x.
    nu c. 
       rd b <- c. b
    .| wr 1 -> c. 0
    .| wr 0 -> c. 0 in
GetBit 1
